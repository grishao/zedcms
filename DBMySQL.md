# Концепция работы с БД mySQL #

БД mySQL используется по умолчанию во фреймворке ZedCMS. Подключение к БД производится всегда, в начале запуска фреймворка. За работу с БД отвечают следующие классы:
  * **Z\_DB** (доступ через глобальную переменную **$DB**)
  * **Z\_DBResult** (возвращается из **Z\_DB** в результате операций)
  * **Z\_DBMaintainTable** (манипуляция с таблицами)

# Настройка подключения к БД #
Настройка подключения к БД производится в [конфигурации сайта](SiteConfiguration.md) (**/configs/config.ini**)
```
db.server="localhost"
db.user="myuser"
db.password="password"
db.db="db_name"
```

Соединение с БД производится автоматически в самом начале запуска фреймворка. При этом соединение хранится в классе **Z\_DB**, который в свою очередь представлен глобальной переменной **$DB**.

# Работа с БД mySQL #
Рассмотрим пример работы с БД.
```
global $DB;
$result = $DB->Query("SELECT * FROM mytable")->fetchAll();
print_r($result);
```

Первая строка получает видимость глобальной переменной **$DB** (класс **Z\_DB**). Далее вызывается метод **Query()**, который в свою очередь возвращает результат в виде класса **Z\_DBResult**, и в итоге в классе **Z\_DBResult** вызывается метод **fetchAll()**, который возвращает ассоциативный массив данных таблицы:
```
array(
  0 => array(
    "field1" => "value_field1",
    "field2" => "value_field2",
    "field3" => "value_field3"
  ),
  1 => array(
    "field1" => "value_field1",
    "field2" => "value_field2",
    "field3" => "value_field3"
  ),
  2 => array(
    "field1" => "value_field1",
    "field2" => "value_field2",
    "field3" => "value_field3"
  )
)
```