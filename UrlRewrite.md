# Urlrewrite #
Иногда необходимо задать другой URL адрес для [страницы](Pages.md). Например, у нас есть страница **/contacts/contacts.php** и необходимо сделать ее доспутной по адресу **/contacts/**. Или перенаправлять все статьи на одну и ту же страницу вывода статьи, то есть все адреса вида **/articles/article\_name\_1/345** направлять на страницу **/articles/details.php**, в которую будут переданы название и код статьи **345**.

Для всех этих задач предназначен Urlrewrite.

# Момент выполнения Urlrewrite #
Urlrewrite делает свою работу перед вызовом самой страницы внутри фреймворка (см. [принцип работы](PrinciplesOfWork.md), он подменяет путь к физической странице на сервере исходя из запрошенного URL.

# Из чего состоит Urlrewrite #
Urlrewrite состоит из файла **urlrewrite.php**, который размещен в **/configs/** в папке сайта (то есть он работает в пределах одного сайта). В этом файле вами должны быть прописаны правила перенаправления, и эти правила затем обрабатываются фреймворком с помощью библиотеки **`Z_UrlRewrite.php`**.

# Как это работает #
Рассмотрим на примере. Возьмем две ситуации описанные в начале статьи.
Вот пример **/configs/urlrewrite.php** для этих ситуаций
```
$arUrlRewrite = array(
    array(
        "LABEL" => "Контакты",
        "PATTERN" => "/^\/contacts\/contacts\.php$/iu",
        "PARAMS_GET" => "",
        "PARAMS_POST" => "",
        "SCRIPT_FILE" => "/contacts/index.php",
        "BREAK" => true
    )
    
    array(
        "LABEL" => "Детальная статей",
        "PATTERN" => "/^\/([^\/]+)\/([0-9]+)\/?/iu",
        "PARAMS_GET" => "name=$1&id=$2",
        "PARAMS_POST" => "",
        "SCRIPT_FILE" => "/articles/index.php",
    )
}
```

Итак, файл **urlrewrite.php** должен содержать в себе определение массива **$arUrlRewrite** элементами которого являются правила перенаправления.

Каждый элемент состоит из нескольких полей:
  * **LABEL** - название правила (ни на что не влияет нужно для удобства чтения файла.
  * **PATTERN** - строка регулярного выражения, которое будет применяться к запрошеному клиентом URL.
  * **PARAMS\_GET** - параметры GET, которые могут заполняться результатами работы регулярного выражения или константами.
  * **PARAMS\_POST** - параметры POST, которые могут заполняться по аналогии с параметрами GET.
  * **SCRIPT\_FILE** - страница, которая будет запущена в случае совпадения регулярного выражения и входящего URL.
  * **BREAK** - если true, останавливать дальнейшую обработку элементов urlrewrite, в случае совпадения текущего элемента.

Чтобы пользоваться urlrewrite вам необходимо знать, как работают регулярные выражения PHP, о них можно почитать [тут](http://www.php.net/manual/ru/pcre.pattern.php) и о [работе preg\_match](http://php.net/manual/ru/function.preg-match.php).