# Агенты (службы) #
Агенты выполняют роль периодически запускаемых программ. Например, для сбора мусора, архивирования данных, рассылок и т.д.

# Местоположение #
Агенты размещаются в Mysql таблице **z\_agents**. Которая имеет следующие поля:
  * id - id заполняется автоматом
  * active - активность агента ('Y' - активный)
  * description - описание (для информации)
  * eval\_statement - строка, которая будет выполнена
  * last\_date - последняя дата запуска (заполняется автоматически)
  * next\_date - следующая дата запуска (заполняется автоматически)
  * interval\_minutes - интервал запуска в минутах
  * interval\_cron - интервал запуска в CRON формате (напр. 0 10  1)

Интервал запуска должен быть указан или в формате минут или в формате CRON.

# Запуск агентов #
Агенты запускаются с помощью [серверного скрипта](ServerScripts.md) следующего содержания:

/server\_scripts/agents.php
```
<?
// ЗАПУСКАТЬ ТОЛЬКО С ПАРАМЕТРОМ domain=www.mysite1.com
// Необходимые вызовы для запуска серверного скрипта
define("Z_CONFIG_FILE",realpath(dirname(__FILE__) . '/../configs/config.ini'));
require(dirname(__FILE__) . '/../../z.common/server_scripts/index.php');

// Выполняем запрос 
Z_Agents::runAgents();
?>
```

# Временные агенты #
Временные агенты, это агенты, которые моугут выполниться конечное число раз через определенные периоды.
Документация пока недоступна, реализация временных агентов находится в той же библиотеке, где и для обычных агентов **`Z_Agents`**.