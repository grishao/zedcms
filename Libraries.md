# Библиотеки ZedCMS #
Библиотекой ZedCMS является класс с набором публичных методов (обычно статических), которые выполняют ту или иную функцию.

# Применение #
Библиотеки применяются во всех обработках данных, а так же при работе с БД, http, XMLRpc и др. Библиотеки выполняют роль модели в паттерне MVC. Все что можно вынести в отдельную обработку для переиспользования кода, нужно хранить в библиотеках.

# Месторасположение #
Библиотеки ZedCMS размещаются в папке **libs** и в различных ее подпапках. Сама папка **libs** размещается в папке сайта, например, **/myuser/www.site1.com/libs/** и в папке **/myuser/z.common/libs/**. Таким образом, библиотеки могут быть общими для всех сайтов, при размещении в **/myuser/z.common/libs/** или специфичными для конкретного сайта, при размещении в папке этого сайта. Так же общие библиотеки ZedCMS могут быть переопределены библиотекой конкретного сайта. Смотрите ниже о переопределении.

# Правила наименования, автозагрузка #
Как было указано в начале, библиотека это класс. И имя класса должно подчиняться определенным правилам, чтобы он работал корректно в составке ZedCMS.

Примеры названия классов и файлов (в скобках указан путь с файлом относительно папки **/libs/**):
  * Класс **`Z_User`** (**`Z/User.php`**)
  * Класс **`Z_Form_ProcessForm`** (**`Z/Form/ProcessForm.php`**)
  * Класс **`MyLibs_MyObject`** (**`MyLibs/MyObject.php`**)

Как видно из примеров, файлы библиотек (классов) могут быть организованны в папки.
И из названия класса всегда можно узнать его местоположение.

Пример содержимого файла класса (библиотеки) `MyLibs/MyObject.php`:
```
class MyLibs_MyObject {
    static function getObject($id) {
        $id = intVal($id);
        global $DB;
        $res = $DB->Query("SELECT * FROM myobject WHERE id = $id");
        return $res;
    }
}
```

**Внимание!** Все библиотеки (классы) относящиеся к фреймворку ZedCMS начинаются с **`Z_`**, при разработке своих библиотек достаточно называть их по другому, чтобы всегда отличать код фреймворка от кода конкретного внедрения.

# Доступ к библиотеке, переопределение #
Чтобы обратиться к библиотеке(классу) достаточно просто вызвать ее метод, например:
```
Z_User::getUserById($id);
```
При этом, если файл класса еще не подгружен, фреймворк ZedCMS автоматически попробует его найти в libs сайта, затем в libs фреймворка (папка z.common) и подгрузить перед вызовом метода **getUserById**. Если же файл /Z/User.php не будет найден, будет вызвано исключение и дальнейшая работа прекратится.

Если библиотека спроектирована как объект, а не как набор статических методов, достаточно инстанциировать объект обычным методом:
```
$user = new Z_User();
```

Чтобы переопределить библиотеку ZedCMS достаточно создать файл с ее именем, но в папке сайта.