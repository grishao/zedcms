# Концепция загрузки файлов #
Для загрузки файлов во фреймворке ZedCMS предусмотрены особые механизмы и объекты.

Рассмотрим схему движения файла:
![http://zedcms.googlecode.com/files/file_upload.jpg](http://zedcms.googlecode.com/files/file_upload.jpg)

Загрузка файлов двухшаговая:
  * сначала файлы загружаются во временную папку (без сабмита формы с помощью ajax запроса)
  * затем при сабмите формы файлы из временной папки переносятся в постоянное хранилище.

С самого начала пользователь нажимает в форме "выбрать файл" и указывает в диалоге какие файлы он будет загружать. После закрытия диалога, файлы будут обработаны браузером и отправлены на сервер во временную папку (сразу же без перезагрузки страницы).

При отображении формы в поле выбора файлов прописывается специальный хеш, который передается вместе с данными файлов, и который определяет имя хранилища файлов. Хеш так же исполняет роль ограничителя доступа, если пользователь не имеет доступа к определенной форме, соответственно у него не будет хеша для сохранения файлов в соответствующее хранилище.

Хеш хранится в БД в таблице **z\_upload**, он имеет срок годности (24 часа) и однозначно опредляет имя хранилища, в которое будут записаны файлы.